<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LED Backpack Animator</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app">

    <!-- Top Toolbar -->
    <div class="toolbar">
      <div class="group">
        <label class="lab">Resolution</label>
        <select id="resSelect" class="select">
          <option value="96x128" selected>96 × 128</option>
          <option value="64x64">64 × 64</option>
        </select>
      </div>

      <div class="group grow">
        <label class="lab">Zoom</label>
        <input id="zoom" class="range" type="range" min="0.3" max="8" value="1" step="0.01" />
        <button id="fitBtn" class="button">Fit</button>
      </div>

      <div class="group">
        <label class="lab">Mode</label>
        <div class="seg">
          <button id="modeEdit" class="seg-btn active">✏️ Edit</button>
          <button id="modePreview" class="seg-btn">▶️ Preview</button>
        </div>
      </div>

      <div class="group">
        <label class="lab">FPS</label>
        <input id="fps" class="num" type="number" min="1" max="30" value="15" />
      </div>

      <div class="group">
        <label class="lab">Seconds</label>
        <input id="seconds" class="num" type="number" min="1" max="60" value="8" />
      </div>

      <div class="group">
        <label class="lab">Filename</label>
        <input id="fileName" class="text" type="text" value="animation" />
      </div>

      <div class="group">
        <button id="previewRenderBtn" class="button">Start Preview</button>
        <button id="gifRenderBtn" class="button accent">Render GIF</button>
      </div>
    </div>

    <!-- Progress -->
    <div class="progress-wrap">
      <div id="progress" class="progress" style="--p:0"></div>
      <div class="progress-time"><span id="tCur">0.0s</span> / <span id="tEnd">8.0s</span></div>
    </div>

    <div class="grid">
      <!-- LEFT: Backgrounds -->
      <aside class="panel">
        <h3 class="h">Backgrounds</h3>
        <div id="bgGrid" class="bg-grid"><!-- built by JS --></div>

        <div class="bg-solid-tools hidden">
          <div class="row">
            <label>Solid color</label>
            <input id="bgSolidColor" type="color" value="#000000" />
            <button id="addBgSwatchBtn" class="button tiny">＋Swatch</button>
          </div>
          <div id="bgSwatches" class="swatches"><!-- built by JS --></div>
        </div>

        <input id="bgUpload" type="file" accept="image/*" class="hidden" />
        <img id="gifPreview" class="gif-prev hidden" alt="GIF preview" />
      </aside>

      <!-- CENTER: Canvas -->
      <section class="stage">
        <div class="canvas-wrap">
          <canvas id="led" width="96" height="128"></canvas>
        </div>

        <div class="word-actions">
          <button id="addWordBtn" class="button">+ Word</button>
          <button id="addLineBtn" class="button">+ Line</button>
          <button id="deleteWordBtn" class="button danger">× Delete</button>
        </div>
      </section>

      <!-- RIGHT: Inspector -->
      <aside class="panel inspector">
        <button id="toggleInspector" class="button full">Inspector</button>

        <div id="inspectorBody" class="inspector-body open">
          <!-- Pills -->
          <div class="pills">
            <button class="pill active" data-acc="accFont">Font & Color</button>
            <button class="pill" data-acc="accLayout">Layout</button>
            <button class="pill" data-acc="accAnim">Animations</button>
          </div>

          <!-- Accordions -->
          <details id="accFont" open>
            <summary>Font & Color</summary>
            <div class="rows">
              <div class="row">
                <label>Font</label>
                <select id="fontSelect" class="select">
                  <option>Orbitron</option>
                  <option>Monospace</option>
                  <option>Roboto Mono</option>
                  <option>Inter</option>
                  <option>VT323</option>
                  <option>Press Start 2P</option>
                </select>
              </div>

              <div class="row">
                <label>Size</label>
                <input id="fontSize" class="num" type="number" min="6" max="64" value="22" />
                <label class="chk"><input id="autoSize" type="checkbox" /> Auto-size per line</label>
              </div>

              <div class="row">
                <label>Color</label>
                <input id="fontColor" type="color" value="#FFFFFF" />
                <button id="addSwatchBtn" class="button tiny">＋Swatch</button>
              </div>

              <div id="swatches" class="swatches"><!-- built by JS --></div>
            </div>
          </details>

          <details id="accLayout">
            <summary>Layout</summary>
            <div class="rows">
              <div class="row">
                <label>Line gap</label>
                <input id="lineGap" class="num" type="number" min="0" max="40" value="4" />
              </div>
              <div class="row">
                <label>Word gap</label>
                <input id="wordGap" class="num" type="number" min="0" max="40" value="6" />
              </div>

              <div class="row">
                <label>Align</label>
                <div class="seg">
                  <button class="seg-btn active" data-align="center">Center</button>
                  <button class="seg-btn" data-align="left">Left</button>
                  <button class="seg-btn" data-align="right">Right</button>
                </div>
              </div>

              <div class="row">
                <label>Vertical</label>
                <div class="seg">
                  <button class="seg-btn active" data-valign="middle">Middle</button>
                  <button class="seg-btn" data-valign="top">Top</button>
                  <button class="seg-btn" data-valign="bottom">Bottom</button>
                </div>
              </div>
            </div>
          </details>

          <details id="accAnim">
            <summary>Animations</summary>
            <div id="animList" class="anim-list"><!-- built by JS (includes multi-select buttons) --></div>
          </details>
        </div>
      </aside>
    </div>
  </div>

  <!-- Local GIF encoder libs (put files in ./assets/libs/jsgif/) -->
  <!-- JS will lazy-load them when needed -->

  <script src="./app.js"></script>
</body>
</html>

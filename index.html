<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LED Backpack Animator v2.1 (STABLE)</title>
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<header>
  <h1>LED Backpack Animator <span class="tag">v2.1-STABLE</span></h1>
  <div class="controls">
    <label>Mode:
      <select id="mode">
        <option value="edit">Edit Mode</option>
        <option value="preview">Preview Mode</option>
      </select>
    </label>
    <label>Resolution:
      <select id="resolution">
        <option value="96x128" selected>96×128 (portrait)</option>
        <option value="64x64">64×64 (square)</option>
      </select>
    </label>
    <button id="btnAddWord">+ Word</button>
    <button id="btnAddLine">+ Line</button>
    <button id="btnClear">Clear All Text</button>
    <button id="btnUndo">Undo</button>
    <button id="btnRedo">Redo</button>
    <button id="btnToggleInspector">Show Inspector</button>
    <button id="btnDownloadCfg">Download Config</button>
  </div>
</header>

<div class="container">
  <aside class="sidebar">
    <div>
      <h3 style="margin:6px 0">Backgrounds</h3>
      <div class="toggle small">
        <label><input type="radio" name="bgmode" value="preset" checked/> Preset</label>
        <label><input type="radio" name="bgmode" value="solid"/> Solid</label>
        <label><input type="radio" name="bgmode" value="custom"/> Custom Upload</label>
      </div>

      <div id="presetGrid" class="preset-grid" style="margin-top:8px"></div>

      <div id="solidPicker" style="display:none;margin-top:8px">
        <input id="solidColor" type="color" value="#000000"/>
      </div>

      <div id="customUpload" style="display:none;margin-top:8px">
        <input id="fileInput" type="file" accept="image/png,image/jpeg"/>
      </div>
    </div>
    <hr class="sep"/>
    <div class="small">
      <p><b>Tips</b></p>
      <p><kbd>Space</kbd> new word · <kbd>Enter</kbd> new line · Click background to deselect.</p>
    </div>
  </aside>

  <main class="canvas-wrap">
    <div class="canvas-stage">
      <canvas id="canvas" width="96" height="128"></canvas>
      <div id="deleteWord" class="delete-word">✕</div>
      <div id="selectionOverlay" class="stage-overlay" style="display:none"></div>
    </div>
    <div class="small">Pixel preview is auto-scaled for clarity. Rendering is preview-only in v2.1.</div>
  </main>
</div>

<div class="bottom-bar">
  <div class="controls">
    <span class="small">Inspector</span>
    <button id="btnInspectorOpenClose">Open / Close</button>
  </div>
  <div id="inspector" class="inspector">
    <div class="section">
      <h3>Font & Size</h3>
      <div class="grid">
        <label>Font
          <select id="fontSelect">
            <option value="Arial, sans-serif">Arial</option>
            <option value="'Courier New', monospace">Courier New</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="Impact, fantasy">Impact</option>
            <option value="Verdana, sans-serif">Verdana</option>
            <option value="Monaco, monospace">Monaco</option>
          </select>
        </label>
        <label>Size
          <input id="fontSize" type="number" min="6" max="64" value="16"/>
        </label>
        <label><input type="checkbox" id="autoSize" checked/> Auto Size</label>
      </div>
    </div>

    <div class="section">
      <h3>Color & Swatches</h3>
      <div class="grid">
        <label>Color <input id="fontColor" type="color" value="#ffffff"/></label>
        <div>
          <button id="btnAddSwatch">+ Swatch</button>
          <button id="btnDelSwatch">- Swatch</button>
        </div>
      </div>
      <div id="swatches" class="swatches"></div>
    </div>

    <div class="section">
      <h3>Spacing</h3>
      <div class="grid">
        <label>Line Spacing <input id="lineSpacing" type="range" min="0" max="20" value="6"/></label>
        <label>Word Spacing <input id="wordSpacing" type="range" min="0" max="20" value="4"/></label>
        <label>Padding <input id="padding" type="range" min="0" max="12" value="2"/></label>
      </div>
    </div>

    <div class="section">
      <h3>Alignment</h3>
      <div class="grid">
        <label>Horizontal
          <select id="hAlign">
            <option value="center">Center</option>
            <option value="left">Left</option>
            <option value="right">Right</option>
            <option value="manual">Manual</option>
          </select>
        </label>
        <label>Vertical
          <select id="vAlign">
            <option value="middle">Middle</option>
            <option value="top">Top</option>
            <option value="bottom">Bottom</option>
            <option value="manual">Manual</option>
          </select>
        </label>
        <button id="btnResetAlign">Reset</button>
      </div>
    </div>

    <div class="section">
      <h3>Animations (Preview only)</h3>
      <div class="grid">
        <label><input type="checkbox" class="anim" data-name="pulse"/> Pulse <input type="range" class="animRange" data-name="pulse" min="0" max="100" value="50"/></label>
        <label><input type="checkbox" class="anim" data-name="flicker"/> Flicker <input type="range" class="animRange" data-name="flicker" min="0" max="100" value="50"/></label>
        <label><input type="checkbox" class="anim" data-name="bounce"/> Bounce <input type="range" class="animRange" data-name="bounce" min="0" max="100" value="50"/></label>
        <label><input type="checkbox" class="anim" data-name="wave"/> Wave <input type="range" class="animRange" data-name="wave" min="0" max="100" value="50"/></label>
        <label><input type="checkbox" class="anim" data-name="scroll"/> Scroll <input type="range" class="animRange" data-name="scroll" min="0" max="100" value="50"/></label>
        <label><input type="checkbox" class="anim" data-name="bubble"/> Bubble <input type="range" class="animRange" data-name="bubble" min="0" max="100" value="50"/></label>
        <button id="btnAnimReset">Return to default</button>
      </div>
    </div>

    <div class="section">
      <h3>Manual Drag</h3>
      <label><input type="checkbox" id="manualDrag"/> Enable manual drag</label>
      <div id="dragWarning" class="small" style="display:none;margin-top:6px">
        ⚠️ Manual drag overrides auto centering. <label><input type="checkbox" id="disableDragWarning"/> Don’t show again this session</label>
      </div>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>

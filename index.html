<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LED Backpack Animator ‚Äî v2.0</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="theme-midnight">

  <input id="textEditor" type="text" class="text-editor" />

  <header class="topbar glass">
    <div class="title-wrap">
      <h1 class="app-title">LED Backpack Animator <span class="ver-badge">v2.0</span></h1>
    </div>
    <button id="aboutBtn" class="icon-btn" title="About">‚ÑπÔ∏è</button>
  </header>

  <nav id="topToolbar" class="toolbar glass">
    <div class="toolbar-row">
      <div class="brand">
        <span class="app-title">LED Backpack Animator</span>
        <span class="ver-badge">v2.0</span>
      </div>
      <div class="toolbar-actions">
        <button class="tb-btn" id="tbProject" aria-expanded="false">Project Settings</button>
        <button class="tb-btn" id="tbApp" aria-expanded="false">App Configuration</button>
        <button class="tb-btn" id="tbRender" aria-expanded="false">Render Settings</button>
        <button class="tb-btn" id="tbAbout" aria-expanded="false">About</button>
      </div>
    </div>
    <div class="toolbar-row mobile-only">
      <div class="toolbar-actions">
        <button id="modeEdit" class="icon-btn active">üìù Edit</button>
        <button id="modePreview" class="icon-btn">üëÅÔ∏è Preview</button>
        <button id="undoBtn" class="icon-btn" title="Undo">‚Ü©Ô∏è</button>
        <button id="redoBtn" class="icon-btn" title="Redo">‚Ü™Ô∏è</button>
        <button id="clearAllBtn" class="icon-btn" title="Clear All">üóëÔ∏è</button>
      </div>
    </div>
  </nav>

  <div class="main-app">

    <div class="canvas-wrap">
      <canvas id="led"></canvas>
      <div id="selectionBox" class="selection-box hidden"></div>
    </div>

    <div class="inspector">
      <div class="pill-group">
        <div id="pillsTop" class="pill-row">
          <button class="pill active" data-acc="accFont">Font & Text</button>
          <button class="pill" data-acc="accLayout">Layout</button>
          <button class="pill" data-acc="accAnim">Animations</button>
        </div>

        <details id="accFont" class="acc-body" open>
          <summary>Font & Text</summary>
          <div class="acc-content">
            <div class="row">
              <label for="fontSelect">Font:</label>
              <select id="fontSelect">
                </select>
            </div>
            <div class="row two-eq">
              <label for="fontSize">Size:</label>
              <input type="number" id="fontSize" value="24" min="6" max="128" step="1">
            </div>
            <div class="row">
              <label class="checkbox"><input type="checkbox" id="autoSize"><span>Auto-size word</span></label>
              <label class="checkbox"><input type="checkbox" id="autoSizePerLine"><span>Auto-size per line</span></label>
            </div>
            <div class="row">
              <label for="fontColor">Color:</label>
              <input type="color" id="fontColor" value="#FFFFFF">
              <button id="addSwatchBtn" class="icon-btn" title="Add to swatches">+</button>
            </div>
            <div id="swatches" class="swatch-row">
              </div>
            </div>
        </details>

        <details id="accLayout" class="acc-body">
          <summary>Layout & Spacing</summary>
          <div class="acc-content">
            <div class="block-label">Alignment</div>
            <div class="row">
              <button class="icon-btn" data-align="left" title="Align Left">‚¨ÖÔ∏è</button>
              <button class="icon-btn active" data-align="center" title="Align Center">‚ÜîÔ∏è</button>
              <button class="icon-btn" data-align="right" title="Align Right">‚û°Ô∏è</button>
              <span style="flex-grow: 1;"></span>
            </div>
            <div class="row">
              <button class="icon-btn" data-valign="top" title="Vertical Align Top">‚¨ÜÔ∏è</button>
              <button class="icon-btn active" data-valign="middle" title="Vertical Align Middle">‚ÜïÔ∏è</button>
              <button class="icon-btn" data-valign="bottom" title="Vertical Align Bottom">‚¨áÔ∏è</button>
              <span style="flex-grow: 1;"></span>
            </div>
            <div class="block-label">Spacing</div>
            <div class="row two-eq">
              <label for="lineGap">Line Gap:</label>
              <input type="number" id="lineGap" value="4" min="0" max="30" step="1">
            </div>
            <div class="row two-eq">
              <label for="wordGap">Word Gap:</label>
              <input type="number" id="wordGap" value="6" min="0" max="30" step="1">
            </div>
          </div>
        </details>

        <details id="accAnim" class="acc-body">
          <summary>Animations</summary>
          <div class="acc-content">
            <div class="row">
              <button id="applySelectedAnimBtn" class="tb-btn small-btn" title="Apply to selected word">Apply to Selected</button>
              <button id="applyAllAnimBtn" class="tb-btn small-btn" title="Apply as default to all words">Apply as Default</button>
            </div>
            <div id="animList" class="anim-list">
              </div>
          </div>
        </details>
      </div>

      <div class="pill-group">
        <div class="pill">
          <div class="block-label">Words & Lines</div>
          <div class="row">
            <button id="addWordBtn" class="tb-btn small-btn" title="Add word/emoji after selection">‚ûï Word</button>
            <button id="addLineBtn" class="tb-btn small-btn" title="Add new line after current line">‚ûï Line</button>
            <button id="deleteWordBtn" class="icon-btn danger" title="Delete selected word/emoji">‚ùå</button>
          </div>
          <div class="row">
            <button id="emojiBtn" class="tb-btn small-btn" title="Add emoji or animated image">üòÄ Emoji</button>
          </div>
          <div class="row tiny-help">
            <label class="checkbox"><input type="checkbox" id="multiToggle"><span>Multi-select</span></label>
            <label class="checkbox"><input type="checkbox" id="manualDragBtn"><span>Manual Drag</span></label>
          </div>
        </div>
      </div>

      <div class="pill-group">
        <div class="pill">
          <div class="block-label">Background & Display</div>
          <div class="row two-eq">
            <label for="resSelect">Resolution:</label>
            <select id="resSelect">
              <option value="96x128">96x128 (Vertical)</option>
              <option value="64x64">64x64 (Square)</option>
            </select>
          </div>
          <div id="bgGrid" class="bg-grid">
            </div>
          <div id="bgSolidTools" class="row hidden">
            <input type="color" id="bgSolidColor" value="#000000">
            <div id="bgSwatches" class="swatch-row"></div>
            <button id="addBgSwatchBtn" class="icon-btn" title="Add to swatches">+</button>
          </div>
          <input type="file" id="bgUpload" accept="image/*" class="hidden">
        </div>
      </div>

      <div class="pill-group">
        <div class="pill">
          <div class="block-label">Render & Export</div>
          <div class="row">
            <label for="fps">FPS (Rate):</label>
            <input type="number" id="fps" value="15" min="1" max="30" step="1">
          </div>
          <div class="row">
            <label for="seconds">Duration (sec):</label>
            <input type="number" id="seconds" value="8" min="1" max="60" step="1">
          </div>
          <div class="row">
            <label for="fileName">File Name:</label>
            <input type="text" id="fileName" value="backpack_anim">
          </div>

          <div class="row two-eq">
            <button id="previewRenderBtn" class="tb-btn" title="Generate static preview image">Generate Preview</button>
            <button id="gifRenderBtn" class="tb-btn primary" title="Download animated GIF">Download GIF</button>
          </div>
          <div id="progress" class="row">
            <progress id="progressBar" value="0" max="100"></progress>
            <span id="tCur">0:00</span> / <span id="tEnd">0:00</span>
          </div>
          <div class="row">
            <img id="gifPreview" class="gif-preview" alt="GIF Preview" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  <script src="assets/libs/animatedEmoji.js"></script>

  <script defer src="app.js"></script>

  <script defer src="assets/libs/jsgif/NeuQuant.js"></script>
  <script defer src="assets/libs/jsgif/LZWEncoder.js"></script>
  <script defer src="assets/libs/jsgif/GIFEncoder.js"></script>
  <script defer src="assets/libs/jsgif/b64.js"></script>

</body>
</html>

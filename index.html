<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LED Backpack Animator ‚Äî v2.1 MVP</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="theme-midnight">

  <header class="topbar glass">
    <div class="toolbar-row">
      <div class="brand">
        <h1 class="app-title">LED Backpack Animator <span class="ver-badge">v2.1</span></h1>
      </div>
      <div class="toolbar-actions">
        <button class="tb-btn" id="tbProject" aria-expanded="false">Project Settings</button>
        <button class="tb-btn" id="tbApp" aria-expanded="false">App Configuration</button>
        <button class="tb-btn" id="tbRender" aria-expanded="false">Render Settings</button>
        <button class="tb-btn" id="tbAbout" aria-expanded="false">About</button>
      </div>
    </div>
  </header>

  <main class="layout">

    <section class="panel glass" id="bg-res">
      <div class="res-bar">
        <span class="label">Resolution:</span>
        <button class="pill active" data-res="96x128">96√ó128</button>
        <button class="pill" data-res="64x64">64√ó64</button>
        <button class="pill" data-res="custom">Custom‚Ä¶</button>
        
        <div class="custom-res hidden">
            <input type="number" id="customW" min="1" max="512" value="96" aria-label="Custom Width" />
            <span>√ó</span>
            <input type="number" id="customH" min="1" max="512" value="128" aria-label="Custom Height" />
            <button class="icon-btn" id="applyCustomRes" title="Apply">Apply</button>
        </div>
      </div>
      <div class="type-tabs">
        <button class="tab active" data-type="preset">Preset</button>
        <button class="tab" data-type="solid">Solid Color</button>
        <button class="tab" data-type="upload">Upload</button>
      </div>

      <div class="bg-content-area" id="bgContentArea">
        <p class="dim">Background content will load here.</p>
      </div>
    </section>

    <section class="controls">
      <div class="row1">
        <div class="mode-toggle">
          <button id="modeEdit" class="pill active">Edit</button>
          <button id="modePlay" class="pill">Play</button>
        </div>
        <div class="zoom-tools">
            <span class="label">Zoom:</span>
            <input type="range" id="zoom" min="50" max="400" value="100" />
            <span id="zoomReadout">100%</span>
            <button id="fit" class="icon-btn" title="Fit to Screen">‚§¢</button>
        </div>
      </div>
      <div class="row2">
        <button id="undo" class="icon-btn" title="Undo (Ctrl+Z)" disabled>‚Ü∂ Undo</button>
        <button id="clearCanvas" class="icon-btn danger" title="Clear All">√ó Clear</button>
        <button id="redo" class="icon-btn" title="Redo (Ctrl+Y)" disabled>‚Ü∑ Redo</button>
      </div>
    </section>

    <section class="stage">
      <div class="canvas-wrap" tabindex="0">
        <canvas id="led" width="96" height="128"></canvas>
      </div>
    </section>

    <section class="word-tools">
      <button id="addWordBtn" class="pill">‚ûï Add Word</button>
      <button id="addLineBtn" class="pill">‚Ü≤ Add Line</button>
      <button id="delSelBtn" class="pill danger" disabled>‚úñ Delete Selected</button>
      <button id="emojiBtn" class="pill">üòÉ Add Emoji</button>
      <button id="multiToggle" class="pill">‚óª‚óª Multi-select</button>
      <button id="manualDragBtn" class="pill">üìå Manual Drag</button>
    </section>

    <aside class="inspector glass">
      <div class="pill-bar">
        <button class="pill" data-inspector-for="font">‚úí Font</button>
        <button class="pill" data-inspector-for="spacing">‚Üî Spacing</button>
        <button class="pill" data-inspector-for="alignment">üìê Alignment</button>
        <button class="pill" data-inspector-for="animations">‚ú® Animations</button>
        <button class="pill" data-inspector-for="render">üíæ Render</button>
      </div>

      <div class="inspector-content">
          </div>
    </aside>

    <section id="previewPane" class="glass hidden">
      <div class="summary-chips">
        </div>
      <div class="preview">
        <img id="gifPreview" alt="GIF preview" />
      </div>
      <div class="scrub hidden">
        <input type="range" id="frameScrub" min="0" max="0" value="0" />
      </div>
      <div class="download-bar">
        <button id="generateGifBtn" class="pill">Generate .Gif Preview</button>
        <button id="downloadGifBtn" class="pill primary" disabled>Download .Gif File</button>
      </div>
      <div id="renderWarning" class="render-warn hidden"></div>
    </section>

  </main>

  <div id="emojiModal" class="modal-overlay hidden">
    <div class="modal glass emoji-modal">
        <div class="modal-header">
            <div class="emoji-controls">
                <select id="emojiTypeFilter" aria-label="Emoji Type Filter">
                    <option value="all">All Emojis</option>
                    <option value="static">Static</option>
                    <option value="animated">Animated</option>
                </select>
                <input id="emojiSearch" type="search" placeholder="Search emojis‚Ä¶" />
                <div class="emoji-pager">
                    <button id="emojiPrev" class="icon-btn" title="Prev page" disabled>‚óÄ</button>
                    <span id="emojiPager">0 / 0</span>
                    <button id="emojiNext" class="icon-btn" title="Next page" disabled>‚ñ∂</button>
                </div>
            </div>
            <button id="emojiClose" class="icon-btn danger">‚úñ</button>
        </div>
        <div id="emojiGrid" aria-live="polite" class="emoji-grid"></div>
        <div class="emoji-fallback hidden">No emojis found.</div>
    </div>
  </div>


  <script defer src="assets/libs/jsgif/NeuQuant.js"></script>
  <script defer src="assets/libs/jsgif/LZWEncoder.js"></script>
  <script defer src="assets/libs/jsgif/GIFEncoder.js"></script>
  <script defer src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LED Backpack Text Animator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <h1>LED Backpack Text Animator</h1>
    <div class="toolbar">
      </div>
  </header>

  <main class="container">
    <section class="bg-panel card">
      <h2>Backgrounds & Resolution</h2>
      <div class="res-row">
        <span id="resLabel" class="muted"></span>
        <button id="flipRes" class="btn small" title="Swap width/height">‚ÜîÔ∏è Flip</button>
        <label for="resMode">Resolution</label>
        <select id="resMode">
          <option value="96x128">96√ó128</option>
          <option value="64x64">64√ó64</option>
          <option value="custom">Custom‚Ä¶</option>
        </select>
        <div id="customRes" class="hidden">
          <label>W</label><input id="customW" type="number" min="8" max="512" value="96">
          <label>H</label><input id="customH" type="number" min="8" max="512" value="128">
          <button id="applyRes" class="btn small">Apply</button>
        </div>
      </div>

      <p class="muted">Pick a preset, a solid color, or upload an image/GIF. Presets exist only for 96√ó128 and 64√ó64.</p>

      <div class="bg-grid" id="bgGrid"></div>
      <div class="bg-inputs">
        <div id="solidWrap" class="hidden"><label>Solid</label><input type="color" id="solidPicker" value="#000000" /></div>
        <div id="customWrap" class="hidden"><label>Custom</label><input type="file" id="customFile" accept="image/*" /></div>
      </div>
    </section>

    <section class="preview-panel card">
      <div class="preview-toolbar">
        <div class="mode-group inline">
          <button id="modeHideAnim" class="btn" title="Static edit view">üôà Hide Animation</button>
          <button id="modeShowAnim" class="btn" title="Animated output view">üåÄ Show Animation</button>
        </div>
        <div class="zoom">
        <div class="zoom">
          <button id="zoomOut" class="btn">-</button>
          <span id="zoomLabel">200%</span>
          <button id="zoomIn" class="btn">+</button>
        </div>
      </div>

      <div class="canvasWrap">
        <canvas id="canvas" width="96" height="128" aria-label="LED preview canvas"></canvas>
        <div id="selection" class="selection hidden"></div>
      </div>

      <div class="actions">
        <button id="addLine" class="btn">+ Line</button>
        <button id="addWord" class="btn">+ Word</button>
        <button id="deleteWord" class="btn danger">√ó Delete Word</button>
      </div>
    </section>

    <aside id="inspector" class="inspector card collapsed">
      <div class="inspectorHeader">
        <h3>Inspector</h3>
        <button id="inspectorToggle" class="btn small secondary">‚ñ∏</button>
      </div>
      <div class="inspectorBody">
        <div class="row">
          <div>
            <label>Alignment</label>
            <div class="btn-group" id="alignGroup">
              <button id="alignLeft" class="btn secondary">‚ü∏ Left</button>
              <button id="alignCenter" class="btn secondary">‚áî Center</button>
              <button id="alignRight" class="btn secondary">‚üπ Right</button>
            </div>
          </div>
          <div>
            <label>Line Gap Before</label>
            <input type="number" id="lineGapBefore" value="0" min="-64" max="128" />
          </div>
          <div>
            <label>Line Gap After</label>
            <input type="number" id="lineGapAfter" value="0" min="-64" max="128" />
          </div>
          <div>
            <label>Word Gap Before</label>
            <input type="number" id="wordGapBefore" value="0" min="-64" max="128" />
          </div>
          <div>
            <label>Word Gap After</label>
            <input type="number" id="wordGapAfter" value="0" min="-64" max="128" />
          </div>
        </div>
        <details id="advancedAnim"><summary>Advanced Animation & Export</summary>
          <div class="row">
            <button id="downloadFrames" class="btn">‚¨áÔ∏è Download PNG Frame (single)</button>
          </div>
        </details>

        <div class="row">
          <label>Active line</label>
          <input id="activeLine" type="number" min="0" value="0">
          <label>Active word</label>
          <input id="activeWord" type="number" min="0" value="0">
        </div>
        <div class="row">
          <label>Text</label>
          <input id="wordText" type="text" placeholder="Type word‚Ä¶">
          <label>Color</label>
          <input id="wordColor" type="color" value="#ffffff">
        </div>

        <details open>
          <summary>Typography</summary>
          <div class="row">
            <label>Font size</label><input id="fontSize" type="number" value="22" min="6" max="200">
            <label>Line gap</label><input id="lineGap" type="number" value="2" min="0" max="40">
            <label>Word spacing</label><input id="wordGap" type="number" value="3" min="0" max="60">
          </div>
        </details>

        <details>
          <summary>Advanced Animation</summary>
          <div class="row">
            <label>Breath Y</label><input id="breathY" type="number" step="0.1" value="4.0">
            <label>Scale</label><input id="scaleAmpl" type="number" step="0.01" value="0.03">
          </div>
          <div class="row">
            <label>Wave X</label><input id="waveX" type="number" step="0.1" value="0.8">
            <label>Wave Y</label><input id="waveY" type="number" step="0.1" value="1.4">
          </div>
          <div class="row">
            <label>Seconds</label><input id="seconds" type="number" value="8" min="1" max="30">
            <label>FPS</label><input id="fps" type="number" value="15" min="1" max="30">
          </div>
        </details>
      </div>
    </aside>
  
  <section class="card" style="margin:12px;">
    <details id="aboutApp"><summary>About</summary>
      <p><strong>LED Backpack Text Animator</strong> ‚Äî a fast editor for pixel LED backpacks. 
      Type your words, drag to position, snap to guides, and export frames. 
      Tips: Click a word to edit, drag to move (snaps to center & margins), use ‚ü∏/‚áî/‚üπ to align per line, and ‚ÜîÔ∏è Flip to swap orientation. 
      <em>PS:</em> Power users: there‚Äôs a secret key to instantly load a favorite preset.</p>
    </details>
  </section>

</main>

  <footer class="footer">
    <a href="#" id="downloadPreset" class="btn">‚¨áÔ∏è Download Preset (JSON)</a>
    <input type="file" id="uploadPreset" accept="application/json" class="hidden">
    <button id="uploadPresetBtn" class="btn secondary">Upload Preset (JSON)</button>
  </footer>

  <script src="app.js"></script>
</body>
</html>

/* =====================================================
   LED Backpack Animator â€” style.css (full)
   - Centered canvas, crisp pixel edges
   - Mobile-first layout; no crowding on iPhone
   - Horizontal inspector pills; sections expand below
   - Background preset grid + solid color swatches
   - Nice glassy cards + consistent spacing
   ===================================================== */

/* ---------- variables ---------- */
:root{
  --bg: #0f1118;
  --panel: #171a23;
  --panel-2: #1b2030;
  --text: #e9ecff;
  --muted: #a8b0c3;
  --line: #2a2f40;

  --accent-1: #a871ff;
  --accent-2: #6ee0ff;
  --accent: linear-gradient(90deg, #ff6ad5 0%, #8a7dff 55%, #6ee0ff 100%);

  --radius-lg: 18px;
  --radius-md: 12px;
  --radius-sm: 10px;

  --gap-xl: 28px;
  --gap-lg: 20px;
  --gap-md: 14px;
  --gap-sm: 10px;
}

/* ---------- reset ---------- */
* { box-sizing: border-box; }
html,body { height: 100%; }
body{
  margin:0;
  background: radial-gradient(1200px 700px at 50% -10%, #1a1f31 0%, var(--bg) 60%) fixed;
  color:var(--text);
  font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ---------- helpers ---------- */
.hidden { display:none !important; }
.center { display:flex; align-items:center; justify-content:center; }
.block { display:block; }
.linklike{
  background:none; border:0; padding:4px 8px; color:var(--muted);
  cursor:pointer; border-radius:8px;
}
.linklike:hover{ color:var(--text); }

/* ---------- glass cards ---------- */
.glass{
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  border:1px solid rgba(255,255,255,0.08);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 40px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
}

/* ---------- header ---------- */
.topbar{
  margin: 20px auto 16px;
  padding: 16px;
  max-width: 1100px;
  display: grid;
  gap: var(--gap-md);
}
.title-wrap{
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 14px;
}
#appTitle{
  margin:0;
  font-family: "Orbitron", ui-sans-serif, system-ui;
  font-size: clamp(26px, 4vw, 44px);
  letter-spacing: 0.5px;
}

.tools-row{
  display:flex; flex-wrap:wrap; align-items:center; gap: 10px 12px;
  padding: 8px 12px 14px;
}

/* zoom area */
.zoom-wrap{
  display:flex; align-items:center; gap:10px; margin-left:auto;
}
.zoom-wrap label{ color:var(--muted); }
#zoom{ width: min(56vw, 360px); }

/* undo row */
.undo-row .button{ min-width:42px; }

/* ---------- buttons ---------- */
.button{
  --pad-x: 14px;
  --pad-y: 10px;
  border:1px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: var(--pad-y) var(--pad-x);
  background: rgba(255,255,255,0.05);
  color: var(--text);
  cursor: pointer;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
}
.button.primary{ background: var(--accent); border-color: transparent; color:#0b0b12; font-weight:700; }
.button.tiny{ --pad-x:10px; --pad-y:8px; border-radius:10px; }

/* segmented mini buttons */
.seg{ display:flex; gap:8px; }
.seg-btn{
  border:0; border-radius:10px; padding:10px 14px;
  background: rgba(255,255,255,0.06); color:var(--text); cursor:pointer;
}
.seg-btn.active{ background: var(--accent); color:#0d0d14; font-weight:700; }

/* inspector pills */
.toolbar-tabs{ display:flex; gap:10px; flex-wrap:wrap; }
.pill{
  border:1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  border-radius: 999px; padding: 8px 14px; color:var(--text);
  cursor:pointer;
}
.pill.active{ background: var(--accent); color:#10131d; border-color: transparent; }

/* ---------- layout ---------- */
.layout{
  max-width: 1100px;
  margin: 0 auto;
  display: grid;
  gap: var(--gap-lg);
  grid-template-columns: 1fr;     /* mobile-first: single column */
  padding: 0 14px;
}

/* three-column on large screens */
@media (min-width: 1020px){
  .layout{
    grid-template-columns: 280px 1fr 320px; /* left / canvas / right */
    align-items: start;
  }
}

/* side panels */
.left-panel, .right-panel{
  padding: 16px;
}

/* ---------- background section ---------- */
.left-panel h2{
  margin: 6px 2px 14px;
  font-size: 22px;
  letter-spacing: .4px;
}
.row{ display:grid; gap:10px; margin: 12px 0; }
.row.two{ grid-template-columns: 1fr 1fr; }
.row.two-eq{ grid-template-columns: 1fr 1fr; gap:14px; }
@media (max-width: 520px){
  .row.two, .row.two-eq{ grid-template-columns: 1fr; }
}

label{ color: var(--muted); font-size: 14px; }
select, input[type="number"], input[type="text"], input[type="color"]{
  width: 100%;
  background: #121520;
  color: var(--text);
  border:1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  padding: 10px 12px;
  outline: none;
}
input[type="color"]{ padding: 4px; height: 40px; }

/* Bg preset thumbnails */
.bg-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(74px, 1fr));
  gap: 10px;
}
.bg-tile{
  position:relative; overflow:hidden; border-radius: 12px;
  border:1px solid rgba(255,255,255,0.12);
  background:#0e1220;
  aspect-ratio: 1 / 1;
  cursor:pointer;
}
.bg-tile img{ width:100%; height:100%; object-fit:cover; display:block; }
.bg-tile.active{ outline: 2px solid #9e7bff; }

/* Solid color swatches */
.swatches{ display:flex; flex-wrap:wrap; gap:8px; }
.swatches .sw{ width:26px; height:26px; border-radius:50%; border:2px solid rgba(255,255,255,0.18); cursor:pointer; }
.swatches .sw.active{ outline: 2px solid #fff; }
.bg-solid-tools{ padding: 8px 0 4px; }

/* ---------- canvas panel ---------- */
.stage{
  padding: 16px;
}
.canvas-wrap{
  position: relative;
  height: min(74vh, 560px);
  min-height: 360px;
  border:1px solid var(--line);
  border-radius: var(--radius-lg);
  background:
    radial-gradient(60% 60% at 50% 35%, rgba(120,120,200,0.12) 0%, rgba(60,60,100,0.04) 45%, rgba(0,0,0,0.02) 80%) ,
    #0f1320;
  overflow:hidden;
}

/* The canvas itself is centered and scaled by JS (transform) */
#led{
  position:absolute; left:50%; top:50%;
  transform: translate(-50%, -50%) scale(1);
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  border-radius: 12px;
  box-shadow: 0 0 0 2px rgba(160,120,255,0.25);
}

/* word delete 'x' button */
.word-fx{
  position:absolute; right:10px; top:10px;
  border:0; background:#ff5591; color:#fff; width:32px; height:32px; border-radius:50%;
  box-shadow: 0 6px 20px rgba(255,85,145,0.35);
}

/* progress */
.progress-wrap{ display:flex; align-items:center; gap:10px; margin: 12px 2px 0; }
.progress{
  --p: 0;
  flex:1; height: 8px; border-radius: 999px; overflow:hidden;
  background: #0e1220; border: 1px solid rgba(255,255,255,0.08);
}
.progress > #progress{
  height:100%;
  background: var(--accent);
  width: calc(var(--p) * 100%);
  transition: width .08s linear;
}
.time{ color:var(--muted); font-size: 13px; min-width: 92px; text-align:right; }

.stage-actions{ margin: 14px 0 2px; gap: 12px; }

/* ---------- inspector (right panel) ---------- */
.right-panel{ padding-bottom: 18px; }
.inspector-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom: 8px;
}
#toggleInspector{ background: var(--accent); color:#0c0f18; border:0; }

.inspector-body{ display:block; }
.inspector-body:not(.open){ display:none; }

/* collapsible cards inside inspector */
.acc{
  border:1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  margin: 12px 0;
  background: #141a25;
  overflow:hidden;
}
.acc > summary{
  list-style:none; cursor:pointer; padding: 14px 14px; font-weight: 700;
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  user-select:none;
}
.acc[open] > summary{ border-bottom: 1px solid rgba(255,255,255,0.08); }
.acc-body{ padding: 14px; }
.subttl{ font-weight: 800; letter-spacing: .35px; }
.subhead{ margin: 8px 0 6px; color:var(--muted); font-weight:700; font-size: 13px; }
.chk{ display:flex; align-items:center; gap:8px; margin: 10px 0; color:var(--text); }

/* color controls */
.color-controls{ display:flex; align-items:center; gap:10px; margin-top: 6px; }
#fontColor{ width: 44px; height: 44px; padding:6px; border-radius: 12px; }

/* alignment segmented */
.seg .seg-btn{ min-width: 78px; }

/* ---------- bottom panels ---------- */
.bottom-panels{
  max-width:1100px; margin: 16px auto 60px; padding: 0 14px;
  display:grid; gap: var(--gap-lg);
  grid-template-columns: 1fr;
}
.bottom-panels .card{ padding: 16px; }
.bottom-panels h3{ margin: 6px 2px 14px; font-size: 22px; }

/* upload label as button */
.upload-btn input{ display:none; }
.upload-btn .button{ width:100%; }

/* gif preview image */
.gif-preview{
  width: 100%;
  max-width: 420px;
  border-radius: 12px;
  border:1px solid rgba(255,255,255,0.1);
}

/* ---------- form tweaks ---------- */
input, select, button{ font-size:16px; }
button{ transition: transform .08s ease; }
button:active{ transform: translateY(1px); }

/* ---------- responsive spacing / fixes ---------- */
@media (max-width: 1020px){
  .topbar{ max-width: 100%; margin: 16px 14px; }
  .tools-row { gap: 10px 10px; }
  .zoom-wrap { order: 3; width:100%; justify-content: flex-start; }
  .undo-row { order: 2; }
}

@media (max-width: 420px){
  .tools-row{ flex-direction: column; align-items: stretch; }
  .zoom-wrap{ margin-left:0; }
  .seg{ gap:10px; }
  .stage-actions .button{ width: 46%; }
}

/* ---------- focus ring ---------- */
button:focus-visible, select:focus-visible, input:focus-visible{
  outline: 2px solid #8e7dff; outline-offset: 2px;
}

/* ---------- scrollbar (nice but subtle) ---------- */
::-webkit-scrollbar{ width:12px; height:12px; }
::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, #2a2f40, #202638);
  border: 3px solid transparent;
  border-radius: 999px;
  background-clip: content-box;
}

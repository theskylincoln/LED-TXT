/* =========================================================
   LED Backpack Animator — FULL style.css
   - Mobile-first; clean spacing & safe tap targets
   - Canvas perfectly centered (x/y) with true Fit scaling
   - Buttons never crowd: uses gap + wrap with min-width
   - Inspector: pills-only toolbar; panels drop below
   - Background thumbnails grid with neon ring & active state
   - Progress bar sits directly under canvas
   ========================================================= */

/* ---------- CSS variables (theme) ---------- */
:root{
  --bg: #0f1222;
  --panel: #171a2b;
  --glass: rgba(255,255,255,0.04);
  --text: #e9ecff;
  --muted: #b6b9d6;
  --border: #2b2f49;
  --accent1: #7a4bff;
  --accent2: #d556ff;
  --accent3: #5dd0ff;
  --shadow: 0 6px 26px rgba(0,0,0,0.45);
  --radius-xl: 18px;
  --radius-lg: 14px;
  --radius: 10px;
  --radius-sm: 8px;
  --gap: 14px;
}

/* ---------- Base ---------- */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: radial-gradient(1200px 900px at 50% -10%, #1a1f3b 0%, #0f1222 50%) no-repeat fixed;
  color: var(--text);
  font: 16px/1.45 "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1,h2,h3{ margin: 0 0 10px }
h1{ font: 800 34px/1.1 "Orbitron", sans-serif; letter-spacing:.5px }
h2{ font-weight: 800; font-size: 26px }
h3{ font-weight: 700; font-size: 20px }
label{ color: var(--muted) }

/* Containers */
.layout,
.bottom-panels{
  max-width: 1100px;
  margin: 14px auto;
  padding: 0 12px;
}

.glass{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow);
}

/* ---------- Top bar ---------- */
.topbar{
  max-width: 1100px;
  margin: 16px auto 10px;
  padding: 16px;
  display: grid;
  gap: 14px;
}
.title-wrap{
  display:flex; align-items:center; justify-content:space-between;
}
#aboutBtn.linklike{
  color: var(--muted);
  background:none; border:0; padding:6px 10px; border-radius:8px;
}
#aboutBtn.linklike:hover{ color:#fff; background: rgba(255,255,255,.06); }

.tools-row{
  display:flex; flex-wrap:wrap; gap: 10px;
  align-items:center;
}

/* ---------- Buttons ---------- */
.button, .seg-btn{
  --pad-x: 14px;
  display:inline-flex; align-items:center; justify-content:center;
  min-height: 38px; padding: 0 var(--pad-x);
  border-radius: 10px; border:1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  color:#fff; text-decoration:none; cursor:pointer;
  transition:.18s ease;
}
.button:hover, .seg-btn:hover{ filter: brightness(1.06) }
.button.primary{
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  border-color: transparent;
}
.button.tiny{ min-height: 30px; padding: 0 10px; font-size: 13px }

.seg{ display:flex; gap: 8px; flex-wrap:wrap }
.seg-btn.active{
  outline:2px solid color-mix(in oklab, var(--accent2) 55%, white 0%);
  outline-offset: -1px;
}

/* ---------- Zoom row ---------- */
.zoom-wrap input[type="range"]{ width: 200px; }

/* ---------- Stage panel ---------- */
.stage{
  padding: 16px;
  margin-bottom: 16px;
}
.canvas-wrap{
  position: relative;
  height: clamp(360px, 66vw, 560px);
  min-height: 320px;
  border-radius: var(--radius-lg);
  background: radial-gradient(280px 180px at 50% 35%, rgba(140,120,255,.08), rgba(0,0,0,.18)) #111428;
  border: 1px solid var(--border);
  overflow: hidden;
}

/* actual canvas centering */
#led{
  position:absolute; left:50%; top:50%;
  transform: translate(-50%, -50%) scale(1); /* JS updates scale() for Fit & zoom */
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  box-shadow: 0 0 0 2px rgba(122,75,255,.3), 0 0 0 8px rgba(122,75,255,.06) inset;
  border-radius: 12px;
}

/* the pink delete pin sits inside wrap */
.word-fx{
  position:absolute; width:28px; height:28px; border-radius:50%;
  right: 10px; top: 10px;
  background: linear-gradient(180deg, #ff7ae2, #b44aff);
  color:#fff; border:0; display:grid; place-items:center; cursor:pointer;
  box-shadow: 0 6px 16px rgba(0,0,0,.45);
}
.word-fx.hidden{ display:none; }

/* progress under canvas */
.progress-wrap{
  margin: 12px 6px 0;
}
.progress{
  height: 8px; border-radius: 99px;
  background: rgba(255,255,255,.06);
  overflow: hidden; position: relative;
  border: 1px solid var(--border);
}
#progress{
  --p: 0;
  position:absolute; inset:0;
  width: calc(var(--p) * 100%); height:100%;
  background: linear-gradient(90deg, var(--accent2), var(--accent1));
}
.time{ margin-top: 6px; color: var(--muted); font-size: 13px }

/* stage actions */
.stage-actions{
  margin-top: 14px; display:flex; gap:12px; justify-content:center;
}

/* ---------- Resolution & Background card ---------- */
.left-panel{ display:none } /* removed old sidebar entirely */

.card, .stage{ background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); }

.bg-grid{
  display:grid; grid-template-columns: repeat(2, minmax(88px,1fr));
  gap: 10px; margin-top: 12px;
}
.bg-tile{
  position: relative; aspect-ratio: 3/4; border-radius: 12px;
  background: #0e1123; border:1px solid var(--border);
  overflow: hidden; display:grid; place-items:center;
  box-shadow: inset 0 0 0 3px rgba(122,75,255,.08), inset 0 0 22px rgba(0,0,0,.6);
  cursor: pointer;
}
.bg-tile img{ width:100%; height:100%; object-fit:cover; filter: saturate(.95) contrast(1.05) }
.bg-tile::after{
  content:""; position:absolute; inset:0; border-radius:12px;
  box-shadow: 0 0 0 0 rgba(122,75,255,0);
  transition: .2s ease;
}
.bg-tile:hover::after{ box-shadow: 0 0 0 3px rgba(122,75,255,.35); }
.bg-tile.active::after{ box-shadow: 0 0 0 3px rgba(213,86,255,.75), 0 0 20px 6px rgba(213,86,255,.25) inset; }

/* Solid tools block (only visible when JS toggles) */
.bg-solid-tools.hidden{ display:none }
.bg-solid-tools .row{ margin-top: 10px }

/* ---------- Forms / rows ---------- */
.row{ display:grid; gap: 10px; margin: 10px 0 }
.row.two{ grid-template-columns: 1fr 1fr; }
.row.two-eq{ grid-template-columns: 1fr 1fr; gap: 12px }
@media (max-width: 520px){
  .row.two, .row.two-eq { grid-template-columns: 1fr; }
}

input[type="text"], input[type="number"], input[type="color"], select{
  width:100%; height:42px; padding: 10px 12px;
  border-radius: 10px; border:1px solid var(--border);
  background: rgba(255,255,255,.04); color:#fff;
}

/* ---------- Swatches ---------- */
.swatches{
  display:flex; flex-wrap:wrap; gap:10px; align-items:center;
}
.swatch{
  width: 26px; height: 26px; border-radius: 7px; cursor:pointer;
  border: 1px solid rgba(255,255,255,.25);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.2);
}
.color-controls{ gap: 10px }

/* ---------- Inspector (pills only) ---------- */
.inspector-bar{
  max-width: 1100px; margin: 0 auto 16px; padding: 10px 12px;
}
.inspector-head .toolbar{
  display:flex; flex-wrap:wrap; gap: 10px; align-items:center;
}
.toolbar-tabs{
  display:flex; gap: 8px; flex-wrap: wrap;
}
.pill{
  min-height: 34px; padding: 0 12px; border-radius: 999px;
  background: rgba(255,255,255,.05); border:1px solid var(--border);
  color:#fff; cursor:pointer;
}
.pill.active{ outline:2px solid var(--accent1); outline-offset:-1px; }

#inspectorBody{ margin-top: 10px }
.acc{
  border:1px solid var(--border); border-radius: 12px; overflow:hidden;
  background: rgba(255,255,255,.03); margin-top: 10px;
}
.acc > summary{
  list-style:none; cursor:pointer; padding: 14px 16px;
  background: rgba(255,255,255,.04); font-weight: 700;
  position: relative;
}
.acc > summary::-webkit-details-marker { display:none; }
.acc[open] > summary{ background: rgba(255,255,255,.06) }
.acc-body{ padding: 14px; display:grid; gap:10px }

/* hide Inspector panel when collapsed toggle is false — driven by JS by adding/removing .open */
#inspectorBody:not(.open){ display:none }

/* ---------- Bottom panels ---------- */
.bottom-panels{
  display:grid; gap: 14px;
}
.bottom-panels .card{ padding:16px }

/* Preview image (if used) */
.gif-preview{
  max-width: 100%;
  display:block;
  border-radius: 12px;
  border: 1px solid var(--border);
}
.gif-preview.hidden{ display:none }

/* ---------- Modal ---------- */
.modal.hidden{ display:none }
.modal{
  position:fixed; inset:0; z-index: 50;
}
.modal-backdrop{
  position:absolute; inset:0; background: rgba(0,0,0,.55); backdrop-filter: blur(2px);
}
.modal-card{
  position:absolute; left:50%; top:50%; transform: translate(-50%,-50%);
  width: min(92vw, 520px);
  padding: 16px;
}

/* ---------- Helpers ---------- */
.center{ text-align:center }
.block{ width:100% }
.hidden{ display:none !important }

/* ---------- Responsive polish ---------- */
@media (min-width: 900px){
  .zoom-wrap input[type="range"]{ width: 260px; }
  #led{ box-shadow: 0 0 0 2px rgba(122,75,255,.35), 0 0 0 10px rgba(122,75,255,.08) inset; }
}

@media (max-width: 420px){
  .button, .seg-btn, .pill{ min-height: 36px; }
  .zoom-wrap input[type="range"]{ width: 160px; }
}

/* ---------- Footer legal (optional) ---------- */
.footer{
  opacity:.7; color: var(--muted); font-size: 13px; text-align:center; margin: 26px 0;
}

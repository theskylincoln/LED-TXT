/* ========== Base (older style / iPhone-friendly) ========== */
:root{
  --glass: rgba(255,255,255,0.08);
  --glass-bright: rgba(255,255,255,0.14);
  --ink: #e9eef6;
  --ink-dim:#b9c2d0;
  --bg:#0c0f14;
  --accent:#5ae1ff;
  --danger:#ff6376;
  --ok:#79ffa7;
  --btn:#1a2029;
  --ring:#2a3240;
}

*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; background:var(--bg); color:var(--ink); font-family: ui-sans-serif,-apple-system,system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif; -webkit-font-smoothing:antialiased; }
img{ max-width:100%; display:block; }

.glass{ background:var(--glass); backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,0.07); border-radius:12px; }

.topbar{ position:sticky; top:0; z-index:10; padding:10px 12px; margin:10px; display:flex; align-items:center; gap:12px; }
.title-wrap h1{ font-size:16px; margin:0; color:var(--ink); }
.tools-row{ display:flex; flex-wrap:wrap; align-items:center; gap:8px; margin-left:auto; }

.seg{ display:inline-flex; gap:6px; background:rgba(255,255,255,0.05); padding:4px; border-radius:999px; }
.seg-btn{ background:transparent; border:none; color:var(--ink); padding:8px 12px; border-radius:999px; cursor:pointer; }
.seg-btn.active{ background:var(--accent); color:#001018; font-weight:600; }
.seg-btn:disabled{ opacity:.4; cursor:not-allowed; }

.zoom-wrap{ display:flex; align-items:center; gap:8px; padding:6px 8px; border-radius:10px; background:#11161e; border:1px solid var(--ring); }
.zoom-wrap input[type="range"]{ width:120px; }

.layout{ display:grid; grid-template-columns: 260px 1fr; gap:10px; padding:10px; }
.left-panel{ padding:12px; height: calc(100dvh - 120px); overflow:auto; }
.left-panel h3{ margin:4px 0 10px; font-size:14px; color:var(--ink); }

.row{ display:flex; align-items:center; gap:8px; margin:6px 0; }
.row.two{ justify-content:space-between; }
.row.two-eq{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.row .button.block{ width:100%; }

.bg-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; }
.bg-tile{ border:1px solid var(--ring); border-radius:8px; overflow:hidden; cursor:pointer; background:#0e1218; }
.bg-tile.active{ outline:2px solid var(--accent); }
.bg-solid-tools{ margin-top:10px; }
.swatches{ display:flex; flex-wrap:wrap; gap:6px; }
.swatches .swatch, .swatches button{ width:24px; height:24px; border-radius:6px; border:1px solid var(--ring); cursor:pointer; }

.stage{ padding:10px; display:flex; flex-direction:column; gap:10px; height: calc(100dvh - 120px); }
.canvas-wrap{ position:relative; flex:1; min-height:200px; background:#0e1218; border:1px dashed var(--ring); border-radius:10px; overflow:hidden; }
#led{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) scale(1); image-rendering: pixelated; }

.stage-actions{ display:flex; align-items:center; gap:8px; }
.button{ background:var(--btn); color:var(--ink); border:1px solid var(--ring); border-radius:10px; padding:8px 12px; cursor:pointer; }
.button.tiny{ padding:6px 10px; font-size:12px; }
.button.primary{ background:var(--accent); color:#001018; border-color:transparent; font-weight:600; }
.button.danger{ background:#2a0f13; border-color:#441821; color:#ffa5b0; }

.hint{ color:var(--ink-dim); font-size:12px; }

.progress-wrap{ display:flex; align-items:center; gap:10px; }
.progress{ position:relative; width:180px; height:8px; background:#0f1420; border:1px solid var(--ring); border-radius:999px; overflow:hidden; }
.progress #progress{ position:absolute; inset:0; --p:0; background: linear-gradient(90deg, var(--accent) 0%, #8affcc 100%); transform-origin:left center; transform: scaleX(var(--p)); }

.time{ font-variant-numeric: tabular-nums; color:var(--ink-dim); }

.inspector-bar{ margin:10px; padding:10px; }
.inspector-head{ display:flex; align-items:center; justify-content:space-between; padding:6px; }
.toolbar{ display:flex; align-items:center; gap:8px; }
.toolbar .pill{ background:#131924; border:1px solid var(--ring); color:var(--ink-dim); border-radius:999px; padding:6px 10px; cursor:pointer; }
.toolbar .pill.active{ color:#001018; background:var(--accent); border-color:transparent; }

.inspector-body{ margin-top:8px; }
.inspector-body.open{ display:block; }
.inspector-body:not(.open){ display:none; }

.acc{ border:1px solid var(--ring); border-radius:10px; margin:8px 0; }
.acc > summary{ list-style:none; cursor:pointer; padding:8px 10px; background:#0f1420; border-bottom:1px solid var(--ring); }
.acc > summary::-webkit-details-marker{ display:none; }
.subttl{ font-size:13px; color:var(--ink); }
.acc-body{ padding:10px; display:flex; flex-direction:column; gap:8px; }

input[type="number"], input[type="text"], select, input[type="color"]{
  width:100%; background:#0f1420; color:var(--ink); border:1px solid var(--ring);
  border-radius:8px; padding:8px;
}

.gif-preview{ max-width:180px; border-radius:8px; border:1px solid var(--ring); }
.hidden{ display:none !important; }

/* ========== Mobile tweaks ========== */
@media (max-width: 960px){
  .layout{ grid-template-columns: 1fr; }
  .left-panel{ order:2; height:auto; }
  .stage{ order:1; height:auto; }
  .canvas-wrap{ min-height: 52dvh; }
  .zoom-wrap input[type="range"]{ width:100px; }
}
